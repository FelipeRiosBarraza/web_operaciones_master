<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manual de Operaciones Terreno - Master Home</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --tech-blue: #0f172a;
            --tech-light: #f1f5f9;
            --accent-blue: #3b82f6;
            --alert-orange: #f97316;
            --success-green: #22c55e;
        }
        body {
            background-color: #f8fafc;
            font-family: 'Segoe UI', system-ui, sans-serif;
            color: #1e293b;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
        }
        .nav-item.active {
            border-bottom: 3px solid var(--accent-blue);
            color: var(--accent-blue);
            font-weight: 600;
        }
        /* Estilo para la transici√≥n del slide */
        #note-slide-container {
            transition: opacity 0.5s ease-in-out;
        }
        .fade-out { opacity: 0; }
        .fade-in { opacity: 1; }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Header -->
    <header class="bg-slate-900 text-white p-4 shadow-lg sticky top-0 z-50">
        <div class="max-w-5xl mx-auto flex justify-between items-center">
            <div>
                <h1 class="text-xl font-bold tracking-tight">Operaciones Terreno</h1>
                <p class="text-xs text-slate-400">Master Home - Manual de Est√°ndares V0.1</p>
            </div>
            <div id="status-indicator" class="hidden md:block bg-green-600 text-xs px-2 py-1 rounded-full animate-pulse">
                Datos Verificados
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-white shadow-sm sticky top-[72px] z-40">
        <div class="max-w-5xl mx-auto flex overflow-x-auto whitespace-nowrap px-2">
            <button onclick="navTo('home')" id="nav-home" class="nav-item active px-4 py-3 text-sm text-slate-600 hover:bg-slate-50 transition-colors">Inicio</button>
            <button onclick="navTo('config')" id="nav-config" class="nav-item px-4 py-3 text-sm text-slate-600 hover:bg-slate-50 transition-colors">Configuraci√≥n</button>
            <button onclick="navTo('infra')" id="nav-infra" class="nav-item px-4 py-3 text-sm text-slate-600 hover:bg-slate-50 transition-colors">Infraestructura</button>
            <button onclick="navTo('legal')" id="nav-legal" class="nav-item px-4 py-3 text-sm text-slate-600 hover:bg-slate-50 transition-colors">Legal & Checklist</button>
        </div>
    </nav>

    <main class="flex-grow bg-slate-50 p-4">
        <div class="max-w-5xl mx-auto">

            <!-- HOME SECTION -->
            <section id="home" class="space-y-6">
                <div class="bg-white rounded-xl p-6 shadow-sm border border-slate-200">
                    <h2 class="text-2xl font-bold text-slate-800 mb-2">Validaci√≥n T√©cnica Operacional</h2>
                    <p class="text-slate-600 mb-4">Este portal consolida las normativas y lineamientos t√©cnicos aplicables a la instalaci√≥n de sistemas de seguridad en terreno. La informaci√≥n que contiene ha sido validada conforme a est√°ndares industriales y a las directrices establecidas por la Gerencia de Operaciones.</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div onclick="navTo('infra')" class="cursor-pointer group bg-gradient-to-br from-blue-50 to-white p-5 rounded-lg border border-blue-100 hover:border-blue-300 transition-all">
                            <div class="flex items-center justify-between mb-2">
                                <h3 class="font-bold text-blue-900">Validar Medio de Red</h3>
                                <span class="text-2xl">üõ†Ô∏è</span>
                            </div>
                            <p class="text-sm text-blue-800">Factibilidad t√©cnica basada en distancias reales y tipo de antena.</p>
                        </div>
                        
                        <div onclick="navTo('config')" class="cursor-pointer group bg-gradient-to-br from-orange-50 to-white p-5 rounded-lg border border-orange-100 hover:border-orange-300 transition-all">
                            <div class="flex items-center justify-between mb-2">
                                <h3 class="font-bold text-orange-900">Protocolo de Claves</h3>
                                <span class="text-2xl">üîê</span>
                            </div>
                            <p class="text-sm text-orange-800">Est√°ndar de pre-configuraci√≥n obligatoria en bodega.</p>
                        </div>
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200">
                        <h3 class="text-sm font-semibold text-slate-500 uppercase mb-4">Alcance T√©cnico por Medio (Metros)</h3>
                        <div class="chart-container">
                            <canvas id="distanceChart"></canvas>
                        </div>
                        <p class="text-[10px] text-center text-slate-400 mt-2">Nota: Se usa escala logar√≠tmica para apreciar desde los 100m hasta los 25km.</p>
                    </div>
                    <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-200">
                         <h3 class="text-sm font-semibold text-slate-500 uppercase mb-4">Fiabilidad de Enlace</h3>
                         <div class="chart-container">
                            <canvas id="reliabilityChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- CONFIGURATION SECTION -->
            <section id="config" class="hidden space-y-6">
                <div class="bg-white rounded-xl p-6 shadow-sm border-l-4 border-orange-500">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">Protocolo de Activaci√≥n</h2>
                    <p class="text-slate-600 mb-4 text-sm italic">"Todo equipo debe salir programado con su clave para evitar improvisaci√≥n en domicilio, las credenciales deben quedar almacenadas en Odoo asociadas a la serie del equipo."</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mt-6 text-sm">
                        <div class="bg-slate-50 p-4 rounded-lg">
                            <h4 class="font-bold mb-2">Activaci√≥n Previa</h4>
                            <p>Uso obligatorio de SADP Tool en bodega. No se activan equipos en la escalera.</p>
                        </div>
                        <div class="bg-slate-50 p-4 rounded-lg">
                            <h4 class="font-bold mb-2">Seguridad</h4>
                            <p>Claves √∫nicas por proyecto. Prohibido el uso de claves gen√©ricas por defecto.</p>
                        </div>
                        <div class="bg-red-50 p-4 rounded-lg border border-red-100">
                            <h4 class="font-bold text-red-900 mb-2">Registro</h4>
                            <p class="text-red-800">Si el cliente pide cambio, debe quedar registrado en las credenciales asociadas a la tarea que el t√©cnico esta ejecutando de inmediato.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- INFRASTRUCTURE SECTION -->
            <section id="infra" class="hidden space-y-8">
                <div class="bg-gradient-to-r from-slate-800 to-slate-900 rounded-xl p-6 shadow-lg text-white">
                    <h2 class="text-2xl font-bold mb-2">Asistente de Factibilidad</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-xs font-semibold text-slate-400 uppercase mb-1">Distancia estimada (Metros)</label>
                                <input type="number" id="distanceNumInput" value="50" class="w-full bg-slate-700 text-white p-2 rounded border border-slate-600 focus:outline-none focus:border-blue-400">
                            </div>
                            <div>
                                <label class="block text-xs font-semibold text-slate-400 uppercase mb-1">Obst√°culos o Cruces</label>
                                <select id="wiringInput" class="w-full bg-slate-700 text-white rounded p-2 border border-slate-600">
                                    <option value="yes">V√≠a cableada (Postaci√≥n/Ducto)</option>
                                    <option value="no">V√≠a inal√°mbrica (Sin ducto)</option>
                                </select>
                            </div>
                            <button onclick="calculateStandard()" class="w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-3 rounded transition-colors shadow-lg">Analizar Requerimiento</button>
                        </div>
                        <div id="resultCard" class="bg-slate-700/50 rounded-lg p-6 border border-slate-600 flex flex-col justify-center items-center text-center text-white">
                            <span class="text-4xl mb-3">üì°</span>
                            <h3 class="text-xl font-bold">An√°lisis de Red</h3>
                            <p class="text-sm text-slate-400 mt-2">Los resultados consideran el salto t√©cnico a partir de los 250m.</p>
                        </div>
                    </div>
                </div>

                <!-- SLIDE INFORMATIVO DE NOTAS T√âCNICAS -->
                <div class="bg-white rounded-xl p-6 shadow-sm border border-slate-200 min-h-[280px] flex flex-col justify-center relative overflow-hidden">
                    <div id="note-slide-container" class="fade-in">
                        <!-- El contenido se inyecta v√≠a JS -->
                    </div>
                    <!-- Indicador visual de tiempo -->
                    <div class="absolute bottom-0 left-0 h-1 bg-blue-100 w-full">
                        <div id="slide-progress" class="h-full bg-blue-500 w-0 transition-all duration-[7000ms] linear"></div>
                    </div>
                </div>
            </section>

            <!-- LEGAL SECTION -->
            <section id="legal" class="hidden space-y-6">
                <div class="bg-white rounded-xl p-6 shadow-sm border-t-4 border-blue-600">
                    <h2 class="text-2xl font-bold text-slate-800 mb-4">Legalidad y Entrega</h2>
                    <div class="space-y-4">
                        <div class="p-3 bg-blue-50 border-l-4 border-blue-600">
                            <h3 class="font-bold text-sm">Ley 19.628</h3>
                            <p class="text-xs">Prohibido enfocar dormitorios, ventanas o √°reas de recreaci√≥n privada de vecinos. La c√°mara debe captar solo lo necesario para la seguridad del cliente.</p>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl p-6 shadow-sm">
                    <h3 class="text-xl font-bold text-slate-800 mb-4">Checklist de Calidad</h3>
                    <div id="checklistContainer" class="space-y-2"></div>
                    <div class="mt-6 p-4 bg-slate-100 rounded-lg text-center">
                        <div class="w-full bg-slate-300 h-3 rounded-full mt-2">
                            <div id="progressBar" class="bg-blue-600 h-3 rounded-full transition-all w-0"></div>
                        </div>
                        <span id="progressPct" class="text-xl font-bold text-blue-700 mt-2 block">0%</span>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <footer class="bg-slate-900 text-slate-500 py-4 text-center text-[10px]">
        <p id="footer-text">¬© <span id="current-year"></span> Master Home - Operaciones Terreno | Creado con amor por TI ‚ù§Ô∏è</p>
    </footer>

    <script>
        function navTo(tabId) {
            document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
            document.getElementById(`nav-${tabId}`).classList.add('active');
            ['home', 'config', 'infra', 'legal'].forEach(id => document.getElementById(id).classList.add('hidden'));
            document.getElementById(tabId).classList.remove('hidden');
        }

        function calculateStandard() {
            const dist = parseInt(document.getElementById('distanceNumInput').value) || 0;
            const canWire = document.getElementById('wiringInput').value === 'yes';
            const card = document.getElementById('resultCard');
            
            if (canWire) {
                if (dist <= 100) {
                    card.innerHTML = `<span class="text-4xl mb-2">üîå</span><h3 class="text-xl font-bold">UTP Cat6</h3><p class="text-sm opacity-80">Ideal. Use cable 100% cobre.</p>`;
                    card.className = "bg-blue-600 rounded-lg p-6 flex flex-col items-center text-center text-white";
                } else {
                    card.innerHTML = `<span class="text-4xl mb-2">‚ú®</span><h3 class="text-xl font-bold">Fibra √ìptica</h3><p class="text-sm opacity-80">Mandatorio: Supera l√≠mite de cobre.</p>`;
                    card.className = "bg-green-600 rounded-lg p-6 flex flex-col items-center text-center text-white";
                }
            } else {
                if (dist > 250) {
                    card.innerHTML = `<span class="text-4xl mb-2">üì°</span><h3 class="text-xl font-bold">Radioenlace Rejilla</h3><p class="text-sm opacity-80">Requerido para estabilidad en distancias largas.</p>`;
                    card.className = "bg-orange-700 rounded-lg p-6 flex flex-col items-center text-center text-white";
                } else {
                    card.innerHTML = `<span class="text-4xl mb-2">üì∂</span><h3 class="text-xl font-bold">Radioenlace Panel</h3><p class="text-sm opacity-80">Factible para tramos cortos con LoS.</p>`;
                    card.className = "bg-orange-500 rounded-lg p-6 flex flex-col items-center text-center text-white";
                }
            }
        }

        // L√ìGICA DEL SLIDE DE NOTAS T√âCNICAS
        const technicalNotes = [
            {
                title: "Nota T√©cnica: Antenas de Rejilla (Grid)",
                content: "Para distancias sobre 250 metros o entornos complejos, es mandatorio el uso de antenas de rejilla para asegurar que el enlace 'nunca se pierda'.",
                details: [
                    { label: "Radioenlace Panel", text: "Uso: < 250m. Sensible a clima.", color: "orange" },
                    { label: "Radioenlace Rejilla", text: "Uso: Cr√≠ticos / Largas distancias.", color: "blue" }
                ]
            },
            {
                title: "Nota T√©cnica: Est√°ndar de Cobre (UTP)",
                content: "El l√≠mite f√≠sico del cobre son 100 metros. Para instalaciones exteriores se exige cable Cat6 100% Cobre con chaqueta UV.",
                details: [
                    { label: "Distancia M√°xima", text: "100 metros (datos + energ√≠a).", color: "blue" },
                    { label: "Material", text: "Cobre puro (No CCA/Aluminio).", color: "orange" }
                ]
            },
            {
                title: "Nota T√©cnica: Fibra √ìptica",
                content: "Cuando la distancia supera los 100m en v√≠a cableada, la fibra es la √∫nica opci√≥n para garantizar ancho de banda sin latencia.",
                details: [
                    { label: "Inmunidad", text: "Total frente a ruidos el√©ctricos.", color: "green" },
                    { label: "Durabilidad", text: "Alta resistencia en postaci√≥n.", color: "blue" }
                ]
            }
        ];

        let currentNoteIndex = 0;

        function updateNoteSlide() {
            const container = document.getElementById('note-slide-container');
            const progress = document.getElementById('slide-progress');
            const note = technicalNotes[currentNoteIndex];

            // Iniciar desvanecimiento
            container.classList.add('fade-out');

            setTimeout(() => {
                // Cambiar contenido
                let detailsHTML = note.details.map(d => `
                    <div class="p-4 bg-${d.color}-50 border border-${d.color}-200 rounded-lg">
                        <h4 class="font-bold text-${d.color}-900 text-xs uppercase">${d.label}</h4>
                        <p class="text-xs mt-1 text-${d.color}-800">${d.text}</p>
                    </div>
                `).join('');

                container.innerHTML = `
                    <h3 class="text-xl font-bold text-slate-800 mb-4">${note.title}</h3>
                    <p class="text-sm text-slate-600 mb-4">${note.content}</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        ${detailsHTML}
                    </div>
                `;

                // Mostrar de nuevo
                container.classList.remove('fade-out');
                container.classList.add('fade-in');

                // Reiniciar barra de progreso
                progress.style.transition = 'none';
                progress.style.width = '0%';
                setTimeout(() => {
                    progress.style.transition = 'width 7000ms linear';
                    progress.style.width = '100%';
                }, 50);

                currentNoteIndex = (currentNoteIndex + 1) % technicalNotes.length;
            }, 500);
        }

        const tasks = ["Clave registrada", "Norma T568B aplicada", "Se√±al√©tica 19.628 instalada", "Equipos pre-configurados", "Prueba IR nocturna"];
        function initCheck() {
            const cont = document.getElementById('checklistContainer');
            tasks.forEach(t => {
                cont.innerHTML += `<label class="flex items-center p-3 bg-slate-50 border rounded cursor-pointer mb-2"><input type="checkbox" class="t-check" onchange="up()"><span class="ml-3 text-sm">${t}</span></label>`;
            });
        }
        function up() {
            const p = Math.round((document.querySelectorAll('.t-check:checked').length / tasks.length) * 100);
            document.getElementById('progressBar').style.width = p + '%';
            document.getElementById('progressPct').innerText = p + '%';
        }

        window.onload = () => {
            // Actualizador autom√°tico de a√±o
            document.getElementById('current-year').innerText = new Date().getFullYear();

            initCheck();
            updateNoteSlide(); // Primera carga del slide
            setInterval(updateNoteSlide, 7000); // Rotaci√≥n cada 7 segundos

            new Chart(document.getElementById('distanceChart'), {
                type: 'bar',
                data: {
                    labels: ['Cobre (UTP)', 'Radio Panel', 'Radio Rejilla', 'Fibra √ìptica'],
                    datasets: [{ 
                        label: 'Alcance M√°ximo (m)', 
                        data: [100, 250, 5000, 25000], 
                        backgroundColor: ['#94a3b8', '#fbbf24', '#f97316', '#22c55e'] 
                    }]
                },
                options: { 
                    indexAxis: 'y',
                    maintainAspectRatio: false, 
                    plugins: { legend: { display: false } },
                    scales: { 
                        x: { 
                            type: 'logarithmic',
                            title: { display: true, text: 'Metros (Escala Log)', font: { size: 10 } }
                        } 
                    } 
                }
            });
            new Chart(document.getElementById('reliabilityChart'), {
                type: 'doughnut',
                data: { labels: ['Cobre', 'Radio', 'Fibra'], datasets: [{ data: [75, 50, 99], backgroundColor: ['#3b82f6', '#f97316', '#22c55e'] }] },
                options: { maintainAspectRatio: false }
            });
        };
    </script>
</body>
</html>